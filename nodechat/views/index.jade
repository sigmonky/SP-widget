!!! 5
html(lang='en')
  head
    title nodechat
    link(rel='stylesheet', href='/main.css')
    script(type='text/javascript', src='/lib/jquery-1.5.1.js')
    script(type='text/javascript', src='/lib/underscore.js')
    script(type='text/javascript', src='/lib/backbone.js')
    script(type='text/javascript', src='/lib/mashlib.js')
    script(type='text/javascript', src='/lib/ncutils.js')
    script(type='text/javascript', src='/socket.io/socket.io.js')
    script(type='text/javascript', src='/models/models.js')
    script(type='text/javascript', src='/controllers/controllers.js')
    script(type='text/javascript', src='/views/views.js')
    script
      //Fake out FF and IE8
      function log() {
          if (typeof console == 'undefined') {
              return;
          }
          console.log.apply(console, arguments);
      }

      $(document).ready(function () { 
        window.app = NodeChatController.init({port: !{locals.port}, hashpassword: !{locals.hashpassword}, userName: '!{locals.name}', version: '!{locals.version}' }); 
        $('input[name=message]').focus();  
      });
  body
    #wrap
      #header
      #inner-wrap

        #title
          | nodechat.js
        #version v!{locals.version}
        #disconnectMessage disconnected trying to reconnect...

        #right
          #user_list

        #chat_list

        #footer
          form(method='post', action='', onsubmit='return false')#message_form
            input(type='text', name='message', size='240')#message_field
            input(type='submit', value='send')#message_send_button
